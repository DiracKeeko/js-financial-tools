!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).jsFinancialTools=t()}(this,(function(){"use strict";function e(e){return"number"==typeof e&&!isNaN(e)}function t(t,r=2,n="--"){const o=e(r)?r:2;return e(t)?t.toFixed(o):n}function r(t,r=2,n="--"){const o=e(r)?r:2;return e(t)?`${(100*t).toFixed(o)}%`:n}var n=Object.freeze({__proto__:null,isRealNumber:e,float:t,percentage:r});var o=Object.freeze({__proto__:null,calcMax3Concentration:function(t){const r=t.filter((t=>e(t)));if(0===r.length)return;return r.sort(((e,t)=>t-e)),r.slice(0,3).reduce(((e,t)=>e+t),0)/r.reduce(((e,t)=>e+t),0)}}),c=Object.freeze({__proto__:null,number:n,fund:o});function i(e){return new Date(e).getTime()}const u={Q1:["01-01","03-31"],Q2:["04-01","06-30"],Q3:["07-01","09-30"],Q4:["10-01","12-31"]},a=["01-01","12-31"];function f(e){return Math.floor(Math.log10(Math.abs(e)))+1}function l(e,t,r){if(0===r.length)return!1;const[n,o]=r,c=i(n),a=i(o),f=`${e}-${u[t][0]}`,l=`${e}-${u[t][1]}`,s=i(f),d=i(l);return s>=c&&s<=a&&d>=c&&d<=a}var s=Object.freeze({__proto__:null,getIntPartLength:f,getMonetaryUnit:function(t){if(e(t)){const e=f(t);return e>8?"亿":e>4?"万":""}return""},getMaxDate:function(e){const t=e.map((e=>i(e))),r=Math.max(...t);return e[t.indexOf(r)]},getMinDate:function(e){const t=e.map((e=>i(e))),r=Math.min(...t);return e[t.indexOf(r)]},getTimeRangeIntersection:function(e,t){const[r,n]=e,[o,c]=t,i=Math.max(r,o),u=Math.min(n,c);return i<u?[i,u]:[]},checkQuarterInRange:l,checkYearInRange:function(e,t){if(0===t.length)return!1;const[r,n]=t,o=i(r),c=i(n),u=`${e}-${a[1]}`,f=i(`${e}-${a[0]}`),l=i(u);return f>=o&&f<=c&&l>=o&&l<=c},createQuarterArr:function(e){const t=[];if(0===e.length)return t;const[r,n]=e,o=[],c=r.split("-")[0],i=n.split("-")[0];for(let r=parseInt(c,10);r<=parseInt(i,10);r++){o.push(r.toString());["Q1","Q2","Q3","Q4"].forEach((n=>{if(l(r,n,e)){const e=`${r}${n}`;t.push(e)}}))}return t}});var d=Object.freeze({__proto__:null,formatRank:function(t){return e(t)?`No.${t}`:"--"},formatLongText:function(e,t=3){return e?e.length>t?`${e.slice(0,t)}...`:e:"--"},formatWithUnit:function(r,n="",o=2){if(!e(r))return"--";let c;switch(n){case"万":c=t(r/Math.pow(10,4),o);break;case"亿":c=t(r/Math.pow(10,8),o);break;default:c=String(r)}return`${c}${n}`},formatToMonetaryShape:function(r,n=2){if(!e(r))return"--";const o=f(r);if(o>8){return`${t(r/Math.pow(10,8),n)}亿`}if(o>4){return`${t(r/Math.pow(10,4),n)}万`}return`${t(r,n)}`},formatToFloat:function(r,n="",o=2,c=1){if(!e(r))return"--";const i=r/c;return i>0?`${n}${t(i,o)}`:t(i,o)},formatToPercent:function(t,n="",o=2,c=1){if(!e(t))return"--";const i=t/c;return i>0?`${n}${r(i,o)}`:r(i,o)},trimJsonStr:function(e){return e.replace(/\n/g,"").replace(/\r/g,"").replace(/\s|\xA0/g,"")}}),g=Object.freeze({__proto__:null,formatter:d});var $=Object.freeze({__proto__:null,gt:function(t,r){return!e(r)||!(!e(t)&&e(r))&&t>r},lte:function(t,r){return!e(r)||!(!e(t)&&e(r))&&t<=r}});var m=Object.freeze({__proto__:null,completeStockTimeDataArr:function(e,t=2){const r=e.map((e=>e.slice(0,t))),n=new Array(t-1).fill(void 0),o=r[r.length-1].toString(),c=o.slice(0,8),i=o.slice(8,12);let u=Number(i.slice(0,2)),a=Number(i.slice(2,4))+1;for(11===u&&31===a&&(u=13,a=1);u<15;){for(;a<60;){const e=Number(`${c}${u<10?`0${u}`:u}${a<10?`0${a}`:a}`);if(r.push([e,...n]),a+=1,11===u&&a>30){u+=1;break}}a=12===u?1:0,u+=1,15===u&&r.push([Number(`${c}1500`),...n])}return r},completeStockTimeDataObjArr:function(e){const t=e.map((e=>({x:Number(`${e.date}${e.time.slice(0,4)}`),y:e.change,z:e.valuation}))),r=e[e.length-1].date,n=e[e.length-1].time.slice(0,4);let o=Number(n.slice(0,2)),c=Number(n.slice(2,4))+1;for(11===o&&31===c&&(o=13,c=1);o<15;){for(;c<60;){const e=Number(`${r}${o<10?`0${o}`:o}${c<10?`0${c}`:c}`);if(t.push({x:e,y:void 0,z:void 0}),c+=1,11===o&&c>30){o+=1;break}}c=12===o?1:0,o+=1,15===o&&t.push({x:Number(`${r}1500`),y:void 0,z:void 0})}return t}});var p=Object.freeze({__proto__:null,gtZeroNumReg:/^([1-9]\d*(\.\d*[1-9]\d*)?|0\.\d*[1-9]\d*)$/,gteZeroNumReg:/^([1-9]\d*(\.\d*[1-9]\d*)?|0\.\d+|0)$/,gtZeroNumStrictReg:/^([1-9]\d*(\.\d*[1-9]\d*)?|0\.\d*[1-9])$/,gteZeroNumStrictReg:/^([1-9]\d*(\.\d*[1-9]\d*)?|0\.\d*[1-9]|0)$/,intReg:/^(-?[1-9]\d*|0)$/,gtZeroIntReg:/^([1-9]\d*)$/,gteZeroIntReg:/^([1-9]\d*|0)$/,floatReg:/^(-?[1-9]\d*\.\d+|-?0\.\d*[1-9]\d*|0\.0+)$/,floatStrictReg:/^(-?[1-9]\d*\.\d+|-?0\.\d*[1-9])$/,gtZeroFloatReg:/^([1-9]\d*\.\d+|0\.\d*[1-9]\d*)$/,gteZeroFloatReg:/^([1-9]\d*|0)\.\d+$/,gtZeroFloatStrictReg:/^([1-9]\d*|0)\.\d*[1-9]$/,specialCharacterReg:/[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]+/}),_=Object.freeze({__proto__:null,acquire:s,compare:$,complete:m,reg:p});return Object.assign(Object.assign(Object.assign({},c),g),_)}));
