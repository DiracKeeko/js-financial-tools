!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).jsFinancialTools=t()}(this,(function(){"use strict";function e(e){return"number"==typeof e&&!isNaN(e)}function t(t,n=2,r="--"){const o=e(n)?n:2;return e(t)?t.toFixed(o):r}function n(t,n=2,r="--"){const o=e(n)?n:2;return e(t)?`${(100*t).toFixed(o)}%`:r}var r=Object.freeze({__proto__:null,isRealNumber:e,float:t,percentage:n,decimalFloor:function(e,n=2){const r=Math.pow(10,n);return t(Math.floor(e*r)/r,n)},decimalRound:function(e,n=2){const r=Math.pow(10,n);return t(Math.round(e*r)/r,n)},decimalCeil:function(e,n=2){const r=Math.pow(10,n);return t(Math.ceil(e*r)/r,n)}});var o=Object.freeze({__proto__:null,calcMax3Concentration:function(t){const n=t.filter((t=>e(t)));if(0===n.length)return;return n.sort(((e,t)=>t-e)),n.slice(0,3).reduce(((e,t)=>e+t),0)/n.reduce(((e,t)=>e+t),0)}}),c=Object.freeze({__proto__:null,number:r,fund:o});function i(e){return new Date(e).getTime()}const u={Q1:["01-01","03-31"],Q2:["04-01","06-30"],Q3:["07-01","09-30"],Q4:["10-01","12-31"]},a=["01-01","12-31"];function f(e){return Math.floor(Math.log10(Math.abs(e)))+1}function l(e,t,n){if(0===n.length)return!1;const[r,o]=n,c=i(r),a=i(o),f=`${e}-${u[t][0]}`,l=`${e}-${u[t][1]}`,s=i(f),d=i(l);return s>=c&&s<=a&&d>=c&&d<=a}var s=Object.freeze({__proto__:null,getIntPartLength:f,getMonetaryUnit:function(t){if(e(t)){const e=f(t);return e>8?"亿":e>4?"万":""}return""},getMaxDate:function(e){const t=e.map((e=>i(e))),n=Math.max(...t);return e[t.indexOf(n)]},getMinDate:function(e){const t=e.map((e=>i(e))),n=Math.min(...t);return e[t.indexOf(n)]},getTimeRangeIntersection:function(e,t){const[n,r]=e,[o,c]=t,i=Math.max(n,o),u=Math.min(r,c);return i<u?[i,u]:[]},checkQuarterInRange:l,checkYearInRange:function(e,t){if(0===t.length)return!1;const[n,r]=t,o=i(n),c=i(r),u=`${e}-${a[1]}`,f=i(`${e}-${a[0]}`),l=i(u);return f>=o&&f<=c&&l>=o&&l<=c},createQuarterArr:function(e){const t=[];if(0===e.length)return t;const[n,r]=e,o=[],c=n.split("-")[0],i=r.split("-")[0];for(let n=parseInt(c,10);n<=parseInt(i,10);n++){o.push(n.toString());["Q1","Q2","Q3","Q4"].forEach((r=>{if(l(n,r,e)){const e=`${n}${r}`;t.push(e)}}))}return t}});var d=Object.freeze({__proto__:null,formatRank:function(t){return e(t)?`No.${t}`:"--"},formatLongText:function(e,t=3){return e?e.length>t?`${e.slice(0,t)}...`:e:"--"},formatWithUnit:function(n,r="",o=2){if(!e(n))return"--";let c;switch(r){case"万":c=t(n/Math.pow(10,4),o);break;case"亿":c=t(n/Math.pow(10,8),o);break;default:c=String(n)}return`${c}${r}`},formatToMonetaryShape:function(n,r=2){if(!e(n))return"--";const o=f(n);if(o>8){return`${t(n/Math.pow(10,8),r)}亿`}if(o>4){return`${t(n/Math.pow(10,4),r)}万`}return`${t(n,r)}`},formatToFloat:function(n,r="",o=2,c=1){if(!e(n))return"--";const i=n/c;return i>0?`${r}${t(i,o)}`:t(i,o)},formatToPercent:function(t,r="",o=2,c=1){if(!e(t))return"--";const i=t/c;return i>0?`${r}${n(i,o)}`:n(i,o)},trimJsonStr:function(e){return e.replace(/\n/g,"").replace(/\r/g,"").replace(/\s|\xA0/g,"")}}),g=Object.freeze({__proto__:null,formatter:d});var m=Object.freeze({__proto__:null,gt:function(t,n){return!e(n)||!(!e(t)&&e(n))&&t>n},lte:function(t,n){return!e(n)||!(!e(t)&&e(n))&&t<=n}});var p=Object.freeze({__proto__:null,completeStockTimeDataArr:function(e,t=2){const n=e.map((e=>e.slice(0,t))),r=new Array(t-1).fill(void 0),o=n[n.length-1].toString(),c=o.slice(0,8),i=o.slice(8,12);let u=Number(i.slice(0,2)),a=Number(i.slice(2,4))+1;for(11===u&&31===a&&(u=13,a=1);u<15;){for(;a<60;){const e=Number(`${c}${u<10?`0${u}`:u}${a<10?`0${a}`:a}`);if(n.push([e,...r]),a+=1,11===u&&a>30){u+=1;break}}a=12===u?1:0,u+=1,15===u&&n.push([Number(`${c}1500`),...r])}return n},completeStockTimeDataObjArr:function(e){const t=e.map((e=>({x:Number(`${e.date}${e.time.slice(0,4)}`),y:e.change,z:e.valuation}))),n=e[e.length-1].date,r=e[e.length-1].time.slice(0,4);let o=Number(r.slice(0,2)),c=Number(r.slice(2,4))+1;for(11===o&&31===c&&(o=13,c=1);o<15;){for(;c<60;){const e=Number(`${n}${o<10?`0${o}`:o}${c<10?`0${c}`:c}`);if(t.push({x:e,y:void 0,z:void 0}),c+=1,11===o&&c>30){o+=1;break}}c=12===o?1:0,o+=1,15===o&&t.push({x:Number(`${n}1500`),y:void 0,z:void 0})}return t}});var $=Object.freeze({__proto__:null,gtZeroNumReg:/^([1-9]\d*(\.\d*[1-9]\d*)?|0\.\d*[1-9]\d*)$/,gteZeroNumReg:/^([1-9]\d*(\.\d*[1-9]\d*)?|0\.\d+|0)$/,gtZeroNumStrictReg:/^([1-9]\d*(\.\d*[1-9]\d*)?|0\.\d*[1-9])$/,gteZeroNumStrictReg:/^([1-9]\d*(\.\d*[1-9]\d*)?|0\.\d*[1-9]|0)$/,intReg:/^(-?[1-9]\d*|0)$/,gtZeroIntReg:/^([1-9]\d*)$/,gteZeroIntReg:/^([1-9]\d*|0)$/,floatReg:/^(-?[1-9]\d*\.\d+|-?0\.\d*[1-9]\d*|0\.0+)$/,floatStrictReg:/^(-?[1-9]\d*\.\d+|-?0\.\d*[1-9])$/,gtZeroFloatReg:/^([1-9]\d*\.\d+|0\.\d*[1-9]\d*)$/,gteZeroFloatReg:/^([1-9]\d*|0)\.\d+$/,gtZeroFloatStrictReg:/^([1-9]\d*|0)\.\d*[1-9]$/,specialCharacterReg:/[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]+/}),h=Object.freeze({__proto__:null,acquire:s,compare:m,complete:p,reg:$});return Object.assign(Object.assign(Object.assign({},c),g),h)}));
